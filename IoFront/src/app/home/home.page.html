<ion-header>
  <ion-toolbar>
    <div class="home-header">
      <ion-title class="gradient-text">PressNews</ion-title>
    </div>
    <ion-buttons slot="end">
      <ion-button (click)="logout()" fill="clear">
        <ion-icon name="log-out-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>

  <ion-toolbar>
    <ion-searchbar 
      placeholder="Rechercher des articles..." 
      (ionInput)="onSearchChange($event)"
      [value]="searchTerm"
      animated="true"
      clear-icon="close-circle"
      class="custom-searchbar">
    </ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-loading 
    [isOpen]="isLoading" 
    message="Chargement des articles..."
    cssClass="custom-loading">
  </ion-loading>

  <!-- Liste des articles -->
  <div *ngIf="!isArticleDetailVisible" class="articles-container">
    <app-article-list-component 
      [articles]="articles"
      [sousCategories]="sousCategories"
      (articleSelected)="showArticleDetail($event)">
    </app-article-list-component>

    <!-- Empty state -->
    <div *ngIf="articles.length === 0 && !isLoading" class="empty-state">
      <ion-icon name="newspaper-outline"></ion-icon>
      <h3>Aucun article trouvé</h3>
      <p *ngIf="searchTerm">Aucun résultat pour "{{ searchTerm }}"</p>
      <p *ngIf="!searchTerm">Aucun article disponible pour le moment</p>
      <ion-button (click)="loadArticles()" fill="solid">
        <ion-icon name="refresh" slot="start"></ion-icon>
        Actualiser
      </ion-button>
    </div>
  </div>

  <!-- Détail de l'article -->
  <div *ngIf="isArticleDetailVisible && selectedArticle" class="article-detail">
    <ion-header collapse="condense">
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="hideArticleDetail()" fill="clear">
            <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-buttons>
        <ion-title>{{ selectedArticle.titre | slice:0:30 }}{{ selectedArticle.titre.length > 30 ? '...' : '' }}</ion-title>
      </ion-toolbar>
    </ion-header>

    <app-article-detail-component 
      [article]="selectedArticle"
      [sousCategories]="sousCategories">
    </app-article-detail-component>
  </div>
</ion-content>